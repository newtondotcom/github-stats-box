name: Update GitHub Stats Gist
on:
    workflow_dispatch:
    schedule:
        - cron: '0 0 * * *' # Run daily at midnight
    push:
        branches:
            - master
jobs:
    run:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/setup-node@master
              with:
                  node-version: 18
            # If you edit the .js files and want to run them in your GitHub Action, you need to:
            # - uncomment the 2 following lines
            # - replace "npx github-stats-box@1" with "npm start"
            # N.B: Your action will not receive future updates if you do so

            - uses: actions/checkout@master
            - run: npm ci
            - run: npm start
              env:
                  GH_TOKEN: ${{ secrets.GH_TOKEN }} # Do not edit, defined in secrets

                  # Edit the following environment variables
                  GIST_ID_STATS: c304c869aa667a185d7e433f11e41dc2 # The ID portion from your stats gist url
                  GIST_ID_CODING: e6aefaa99f5bb8a7de77a9e118945b2f # The ID portion from your coding activity gist url

                  ALL_COMMITS: true # If `true` it will count all commits, if `false` it will count your last year commits and disk space
                  K_FORMAT: true # If `true`, large numbers will be formatted with a "k", for example "1.5k"

                  STATS_VERSION: 1 # 1 : version with disk usage, 2 : version with pull requests number
